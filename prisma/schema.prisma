// Prisma Schema Genino

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


// Ù…Ø¯Ù„ Ú©Ø§Ø±Ø¨Ø± (ÙˆØ§Ù„Ø¯ÛŒÙ† Ú˜Ù†ÛŒÙ†Ùˆ)
model User {
  id            Int       @id @default(autoincrement())
  
  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‡ÙˆÛŒØªÛŒ
  firstName     String
  lastName      String
  fullName      String?        // Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²
  username      String?  @unique
  nationalCode  String?  @unique
  
  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³
  email         String   @unique
  phone         String?  @unique

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ ÙˆØ±ÙˆØ¯
  password      String
  
  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±ÙˆÙØ§ÛŒÙ„
  gender        String?        // male | female
  birthDate     DateTime?
  province      String?
  city          String?
  
  // Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  // Ø±ÙˆØ§Ø¨Ø·
  children      Child[]
  savedArticles SavedArticle[]
}


// Ù…Ø¯Ù„ Ú©ÙˆØ¯Ú©
model Child {
  id          Int        @id @default(autoincrement())
  userId      Int
  fullName    String?
  gender      String?    // male | female
  birthDate   DateTime?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  // Ø±Ø§Ø¨Ø·Ù‡â€ŒÙ‡Ø§
  user        User       @relation(fields: [userId], references: [id])
  growth      GrowthMetric[]
  testResults TestResult[]
}
// Ù…Ø¯Ù„ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ø´Ø¯ Ú©ÙˆØ¯Ú©
model GrowthMetric {
  id          Int        @id @default(autoincrement())
  childId     Int
  height      Float?     // Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒÙ…ØªØ±)
  weight      Float?     // ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…)
  headCircumference Float? // Ø¯ÙˆØ± Ø³Ø± (Ø³Ø§Ù†ØªÛŒÙ…ØªØ±)
  measuredAt  DateTime   @default(now())

  // Ø±Ø§Ø¨Ø·Ù‡â€ŒÙ‡Ø§
  child       Child      @relation(fields: [childId], references: [id])
}
// Ù…Ø¯Ù„ ØªØ³Øªâ€ŒÙ‡Ø§ (Ù„ÛŒØ³Øª ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ú˜Ù†ÛŒÙ†Ùˆ)
model Test {
  id          Int        @id @default(autoincrement())
  title       String
  description String?
  category    String?     // growth | health | awareness | behavior
  createdAt   DateTime    @default(now())

  // Ø±Ø§Ø¨Ø·Ù‡â€ŒÙ‡Ø§
  results TestResult[]
}
// Ù†ØªØ§ÛŒØ¬ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©ÙˆØ¯Ú©
model TestResult {
  id          Int        @id @default(autoincrement())
  testId      Int
  childId     Int
  resultValue String?     // Ù…Ù‚Ø¯Ø§Ø± Ù†ØªÛŒØ¬Ù‡ØŒ Ù…ØªÙ† ÛŒØ§ Ø¹Ø¯Ø¯
  score       Int?        // Ø§Ù…ØªÛŒØ§Ø² ØªØ³Øª (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯)
  createdAt   DateTime    @default(now())

  // Ø±Ø§Ø¨Ø·Ù‡â€ŒÙ‡Ø§
  test        Test        @relation(fields: [testId], references: [id])
  child       Child       @relation(fields: [childId], references: [id])
}
// Ù…Ø¯Ù„ Ù…Ù‚Ø§Ù„Ø§Øª Ú˜Ù†ÛŒÙ†Ùˆ
model Article {
  id          Int        @id @default(autoincrement())
  title       String
  slug        String     @unique
  category    String?
  image       String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  savedBy     SavedArticle[]   // ğŸ‘ˆ Ø§ÛŒÙ† Ø®Ø· Ø¬Ø¯ÛŒØ¯
}

// Ù…Ù‚Ø§Ù„Ø§Øª Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡ ØªÙˆØ³Ø· Ù‡Ø± Ú©Ø§Ø±Ø¨Ø±
model SavedArticle {
  id         Int      @id @default(autoincrement())
  userId     Int
  articleId  Int
  savedAt    DateTime @default(now())

  // Ø±Ø§Ø¨Ø·Ù‡â€ŒÙ‡Ø§
  user       User     @relation(fields: [userId], references: [id])
  article    Article  @relation(fields: [articleId], references: [id])
}
